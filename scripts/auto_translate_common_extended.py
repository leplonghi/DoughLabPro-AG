import os
import json
import re

def load_json(path):
    with open(path, 'r', encoding='utf-8') as f:
        return json.load(f)

def save_json(path, data):
    with open(path, 'w', encoding='utf-8') as f:
        json.dump(data, f, indent=2, ensure_ascii=False)

COMMON_PT = {
    "Home": "Início",
    "Calculator": "Calculadora",
    "Learn": "Aprender",
    "Shop": "Loja",
    "Styles": "Estilos",
    "Legal": "Legal",
    "Tools": "Ferramentas",
    "Community": "Comunidade",
    "Daily table bread": "Pão de mesa diário",
    "Burger buns": "Hambúrguer",
    "Sandwich rolls": "Rolinhos de sanduíche",
    "Sandwich bread": "Pão de forma",
    "Bruschetta": "Bruschetta",
    "Rustic table bread": "Pão rústico de mesa",
    "Flatbread snack": "Lanche de pão achatado",
    "Sandwich base": "Base para sanduíche",
    "Artisan bread expressing local grains": "Pão artesanal expressando grãos locais",
    "Global": "Global",
    "Hot dog buns": "Pães de cachorro-quente",
    "Sausage rolls": "Enroladinhos de salsicha",
    "Soft sandwich bread": "Pão de forma macio",
    "Thick toast": "Torrada grossa",
    "Traditional Scandinavian flatbread": "Pão achatado tradicional escandinavo",
    "Sweet or savory wraps": "Wraps doces ou salgados",
    "Nutritious sourdough loaves": "Pães nutritivos de fermentação natural",
    "Accompaniment to curries": "Acompanhamento para curries",
    "Flatbread for dipping": "Pão achatado para mergulhar",
    "Rustic sandwiches": "Sanduíches rústicos",
    "Rustic loaves": "Pães rústicos",
    "Soup accompaniment": "Acompanhamento de sopa",
    "Rustic Italian table bread": "Pão de mesa italiano rústico",
    "Sweet rolls": "Rolinhos doces",
    "Milk bread loaves": "Pães de leite",
    "Snack sandwiches": "Sanduíches de lanche",
    "Breakfast rolls": "Pães de café da manhã",
    "Sweet or savory fillings": "Recheios doces ou salgados",
    "Pocket flatbread": "Pão sírio (bolso)",
    "Wraps and sandwiches": "Wraps e sanduíches",
    "Traditional pretzels": "Pretzels tradicionais",
    "Pretzel rolls and sticks": "Pães e palitos de pretzel",
    "Traditional rye loaves": "Pães de centeio tradicionais",
    "Cold cuts and cheese": "Frios e queijos",
    "Artisan sourdough": "Fermentação natural artesanal",
    "Dense wholegrain rye bread": "Pão de centeio integral denso",
    "Long keeping breads": "Pães de longa duração",
    "Wholegrain sandwich bread": "Pão de forma integral",
    "Mix to medium development": "Misturar até desenvolvimento médio",
    "Mix to full development": "Misturar até desenvolvimento completo",
    "Proof in Pullman Pan": "Fermentar em forma Pullman",
    "Hang upside down": "Pendurar de cabeça para baixo",
    "Mix dry ingredients": "Misturar ingredientes secos",
    "Bake hot and fast": "Assar quente e rápido",
    "Fold in Dry": "Incorporar secos",
    "Sweet loaf": "Pão doce",
    "Pastry": "Confeitaria",
    "Filled donuts": "Donuts recheados",
    "Sweet fried pastries": "Doces fritos",
    "Breakfast pastry": "Confeitaria de café da manhã",
    "Festive sweet bread for Easter": "Pão doce festivo para Páscoa",
    "Viennoiserie display": "Vitrine de Viennoiserie",
    "Fried sweet doughnuts": "Donuts doces fritos",
    "Festive treats": "Guloseimas festivas",
    "Sweet breakfast pastry": "Pão doce de café da manhã",
    "Viennoiserie item": "Item de Viennoiserie",
    "Snack pastry": "Salgado de massa",
    "Festive sweet bread": "Pão doce festivo",
    "Christmas bread": "Pão de Natal",
    "Festive sweet loaf": "Pão doce festivo",
    "Generic sweet rolls": "Pãezinhos doces genéricos",
    "Base for multiple pastry formats": "Base para múltiplos formatos",
    "Fried donuts": "Donuts fritos",
    "Glazed or filled donuts": "Donuts glaceados ou recheados",
    "Pizza": "Pizza",
    "Gourmet personal pizzas": "Pizzas gourmets individuais",
    "Creative toppings": "Coberturas criativas",
    "Deep dish pizza": "Pizza prato fundo (Deep Dish)",
    "Thick pan pizza": "Pizza de forma grossa",
    "Authentic Neapolitan Margherita": "Margherita Napolitana Autêntica",
    "Marinara": "Marinara",
    "Gourmet toppings": "Coberturas gourmet",
    "Home baking without pizza oven": "Assar em casa sem forno de pizza",
    "Crispier crust lovers": "Amantes de borda crocante",
    "Charred thin crust": "Massa fina tostada",
    "Clam pie": "Pizza de mariscos",
    "Premium slice shops": "Pizzarias de fatia premium",
    "Whole pie artisan pizzerias": "Pizzarias artesanais (pizza inteira)",
    "Roman thin pizza": "Pizza fina romana",
    "Crispy pizza base": "Base de pizza crocante",
    "Roman pan pizza": "Pizza romana de forma",
    "Cracker crust pizza": "Pizza massa cracker",
    "Party snacks": "Petiscos de festa",
    "Taiwanese burger": "Hambúrguer taiwanês",
    "Barbarian Head": "Cabeça de Bárbaro",
    "Second Proof": "Segunda Fermentação",
    "Zombie Skin": "Pele de Zumbi",
    "Blessing the bread": "Abençoando o pão",
    "Scald": "Escaldar",
    "Pocket Mechanism": "Mecanismo de Bolso",
    "Firebase Firestore failed to initialize": "Falha ao inicializar Firebase Firestore",
    "Firebase Storage failed to initialize": "Falha ao inicializar Firebase Storage",
    "Explore": "Explorar",
    "History of your productions.": "Histórico de suas produções.",
    "Start a new calculation to save your first bake.": "Inicie um novo cálculo para salvar sua primeira fornada.",
    "Go to Calculator": "Ir para Calculadora",
    "Piece Weight": "Peso da Peça",
    "Units": "Unidades",
    "Load": "Carregar",
    "Updated successfully.": "Atualizado com sucesso.",
    "Are you sure you want to delete \"{name}\"?": "Tem certeza que deseja excluir \"{name}\"?",
    "Are you sure you want to delete oven \"{name}\"?": "Tem certeza que deseja excluir o forno \"{name}\"?",
    "Are you sure you want to delete levain \"{name}\"?": "Tem certeza que deseja excluir o levain \"{name}\"?",
    "Guided": "Guiado",
    "Hot Day": "Dia Quente",
    "Try lower yeast.": "Tente menos fermento.",
    "Cold Day": "Dia Frio",
    "Try longer ferment.": "Tente fermentação mais longa.",
    "Great for crisp crusts.": "Ótimo para crostas crocantes.",
    "Advertisement": "Publicidade",
    "Unlock DoughLab Pro": "Desbloqueie DoughLab Pro",
    "Take your baking to the professional level with advanced tools and insights.": "Leve sua panificação ao nível profissional com ferramentas avançadas.",
    "Maybe later": "Talvez depois",
    "Best Value": "Melhor Valor",
    "Pro Plan": "Plano Pro",
    "/ month": "/ mês",
    "Favorites": "Favoritos",
    "Filters": "Filtros",
    "Type": "Tipo",
    "Region": "Região",
    "Cookies": "Cookies",
    "Pizzas": "Pizzas",
    "Production Hub": "Central de Produção",
    "My Lab": "Meu Laboratório",
    "Your personal baking command center. Manage your schedule, track your cultures, and analyze your progress in one place.": "Seu centro de comando pessoal. Gerencie cronogramas, rastreie culturas e analise progresso.",
    "Lab Status": "Status do Lab",
    "Operational": "Operacional",
    "Total Batches": "Total de Fornadas",
    "Limit Reached": "Limite Atingido",
    "Daily Operations": "Operações Diárias",
    "Essential tools for planning and logging your baking sessions.": "Ferramentas essenciais para planejar e registrar.",
    "Analysis Lab": "Lab de Análise",
    "Recent Activity": "Atividade Recente",
    "Start your first bake": "Inicie sua primeira fornada",
    "Daily Tip": "Dica Diária",
    "Read Full Article": "Ler Artigo Completo",
    "AI Beta": "IA Beta",
    "Unlock Pro Features": "Desbloquear Recursos Pro",
    "Custom Style": "Estilo Personalizado",
    "Autolyse Science": "Ciência da Autólise",
    "Smart Timeline": "Linha do Tempo Inteligente",
    "Plan your fermentation schedule from start to finish.": "Planeje seu cronograma de fermentação.",
    "My Bakes": "Minhas Fornadas",
    "Your digital notebook. Log every detail of your bakes.": "Seu caderno digital. Registre cada detalhe.",
    "Levain Tracker": "Rastreador de Levain",
    "Monitor the health and feeding schedule of your starter.": "Monitore a saúde e alimentação do seu fermento.",
    "Inventory": "Estoque",
    "Keep track of flour stocks and ingredients.": "Rastreie estoques de farinha e ingredientes.",
    "Consistency Logic": "Lógica de Consistência",
    "Track variables across batches to master repeatability.": "Rastreie variáveis para dominar a repetibilidade.",
    "A/B Comparisons": "Comparações A/B",
    "Compare two recipes side-by-side to find the best method.": "Compare duas receitas lado a lado.",
    "Deep Insights": "Insights Profundos",
    "Visual analytics of your baking trends and history.": "Análise visual de suas tendências.",
    "Learning Goals": "Metas de Aprendizado",
    "Set targets and track your skill progression.": "Defina metas e rastreie sua evolução.",
    "Precision calculators and utilities for serious bakers.": "Calculadoras de precisão para padeiros sérios.",
    "From fundamental chemistry to advanced techniques.": "Da química fundamental a técnicas avançadas.",
    "Categories": "Categorias",
    "Upgrade Successful!": "Upgrade realizado com sucesso!",
    "Upgrade Cancelled": "Upgrade cancelado",
    "Find answers to common questions.": "Encontre respostas para perguntas comuns.",
    "This field is required": "Este campo é obrigatório",
    "Please enter a valid email": "Por favor, insira um email válido",
    "Something went wrong. Please try again.": "Algo deu errado. Tente novamente.",
    "Network error. Check your connection.": "Erro de rede. Verifique sua conexão.",
    "You need to sign in to do that.": "Você precisa entrar para fazer isso.",
    "Saved successfully!": "Salvo com sucesso!",
    "Deleted successfully!": "Excluído com sucesso!",
    "Created successfully!": "Criado com sucesso!",
    "Low Power Strategy": "Estratégia de Baixa Potência",
    "Home gas oven": "Forno a gás doméstico",
    "Home electric oven": "Forno elétrico doméstico",
    "Convection oven": "Forno de convecção",
    "Convection Mode": "Modo Convecção",
    "Why preheat?": "Por que pré-aquecer?",
    "Analysis Summary": "Resumo da Análise",
    "Current Plan:": "Plano Atual:",
    "Diagnosis of potential causes will appear here.": "Diagnóstico de causas potenciais aparecerá aqui.",
    "Define your equipment parameters.": "Defina os parâmetros do seu equipamento.",
    "Wood-fired oven": "Forno a lenha",
    "Pro Insight:": "Insight Pro:",
    "FormulaLab": "FormulaLab",
    "Admin": "Admin",
    "Welcome back": "Bem-vindo de volta",
    "Quick Actions": "Ações Rápidas",
    "Your Stats": "Suas Estatísticas",
    "Total Recipes": "Total de Receitas",
    "Get Started": "Começar",
    "Coming Soon: Early 2026 Roadmap": "Em Breve: Roadmap Início de 2026",
    "Visit": "Visitar",
    "Correction Required": "Correção Necessária",
    "Perfect Match": "Combinação Perfeita",
    "Check your email": "Verifique seu email",
    "Ingredients Planner": "Planejador de Ingredientes",
    "Qty/unit": "Qtd/unidade",
    "Optional notes about your oven...": "Notas opcionais sobre seu forno...",
    "Forever free": "Sempre grátis",
    "Generate a social card to share": "Gerar cartão social para compartilhar",
    "Tools for this Formula": "Ferramentas para esta Fórmula",
    "DOUGHLAB PRO": "DOUGHLAB PRO",
    "Time": "Tempo",
    "Preferment": "Pré-fermento",
    "Created by": "Criado por",
    "Description": "Descrição",
    "Tags": "Tags",
    "Difficulty": "Dificuldade",
    "Title": "Título",
    "Phase": "Fase",
    "Mix": "Mistura",
    "Bulk": "Fermentação em Massa",
    "Ball": "Bolar",
    "Bake": "Assar",
    "Duration": "Duração",
    "Action": "Ação",
    "Explain the scientific": "Explicar o científico",
    "What to do...": "O que fazer...",
    "Custom": "Personalizado",
    "Balanced": "Balanceado",
    "Wheat": "Trigo",
    "Generic": "Genérico",
    "Standard": "Padrão",
    "Unlock calculator": "Desbloquear calculadora",
    "Regional Variants": "Variantes Regionais",
    "Refine your style search": "Refine sua busca de estilo",
    "Difficulty Level": "Nível de Dificuldade",
    "Size": "Tamanho",
    "France": "França",
    "Italy": "Itália",
    "United States": "Estados Unidos",
    "Northern Italy": "Norte da Itália",
    "Traditional": "Tradicional",
    "DoughLab Pro": "DoughLab Pro",
    "Pro": "Pro",
    "Settings": "Configurações",
    "Calculator & Recipes": "Calculadora & Receitas",
    "My Lab & Consistencies": "My Lab & Consistências",
    "Styles Library & Science": "Biblioteca de Estilos & Ciência",
    "Community & Sharing": "Comunidade & Compartilhamento",
    "Tools & Utilities": "Ferramentas & Utilitários",
    "Settings & account": "Configurações & conta",
    "How do I save a recipe?": "Como salvo uma receita?",
    "What is the difference between": "Qual a diferença entre",
    "Can I use my own Sourdough Starter?": "Posso usar meu próprio Levain?",
    "How do I unlock PRO features?": "Como desbloqueio recursos PRO?",
    "Go to the": "Vá para",
    "Advanced Baker": "Padeiro Avançado",
    "Professional Pizzaiolo": "Pizzaiolo Profissional",
    "Upgrade Now": "Fazer Upgrade Agora",
    "Legal Overview": "Visão Geral Legal",
    "Terms of Use": "Termos de Uso",
    "Privacy Policy": "Política de Privacidade",
    "Cookie Policy": "Política de Cookies",
    "Affiliate Disclosure": "Divulgação de Afiliados",
    "EULA": "EULA",
    "Intellectual Property": "Propriedade Intelectual",
    "Contact": "Contato",
    "Invalid JSON file": "Arquivo JSON inválido",
    "Easy": "Fácil",
    "Direct": "Direta",
    "Ideal": "Ideal",
    "Loaded from style:": "Carregado do estilo:",
    "Cannot find closest size in an empty array.": "Não foi possível encontrar tamanho mais próximo em array vazio.",
    "Could not find root element to mount to": "Não foi possível encontrar elemento raiz para montar",
    "Not specified": "Não especificado",
    "Empty response from AI model": "Resposta vazia do modelo de IA",
    "Sorry, I couldn": "Desculpe, não consegui",
    "Empty response": "Resposta vazia",
    "Failed to generate style. Please try a different description.": "Falha ao gerar estilo. Tente uma descrição diferente.",
    "Empty diagnostic response": "Resposta de diagnóstico vazia",
    "Failed to diagnose the issue. Please try again.": "Falha ao diagnosticar o problema. Tente novamente.",
    "My Levain": "Meu Levain",
    "User": "Usuário",
    "Failed to generate image": "Falha ao gerar imagem",
    "ErrorBoundary caught an error:": "ErrorBoundary capturou um erro:",
    "Please upload an image file (JPG, PNG, WEBP).": "Faça upload de um arquivo de imagem (JPG, PNG, WEBP).",
    "Image must be smaller than 5MB.": "A imagem deve ser menor que 5MB.",
    "Failed to upload image. Please try again.": "Falha ao enviar imagem. Tente novamente.",
    "Download PDF": "Baixar PDF",
    "Error generating PDF:": "Erro ao gerar PDF:",
    "Upgrade to DoughLab Pro to unlock this advanced tool.": "Faça upgrade para DoughLab Pro para desbloquear esta ferramenta avançada.",
    "Error sharing:": "Erro ao compartilhar:",
    "Failed to copy:": "Falha ao copiar:",
    "Failed to save preferred flour": "Falha ao salvar farinha preferida",
    "Unknown": "Desconhecido",
    "Error fetching user profile:": "Erro ao buscar perfil de usuário:",
    "Auto-upgrading admin user in Firestore...": "Auto-atualizando admin no Firestore...",
    "Failed to auto-upgrade admin:": "Falha ao auto-atualizar admin:",
    "Error loading guest favorites:": "Erro ao carregar favoritos de convidado:",
    "Failed to initialize Firebase App:": "Falha ao inicializar Firebase App:",
    "Firebase configuration missing. App running in Mock/Offline mode.": "Configuração Firebase ausente. App rodando em modo Mock/Offline.",
    "High-Heat / Pro Deck Oven": "Forno de Lastro / Alta Temp",
    "High-Performance Home Oven": "Forno Doméstico Alta Performance",
    "Standard Home Oven": "Forno Doméstico Padrão",
    "Low-Power Home Oven": "Forno Doméstico Baixa Potência",
    "Universal": "Universal",
    "Failed to record ad view": "Falha ao registrar visualização de anúncio",
    "Redirecting to upgrade...": "Redirecionando para upgrade...",
    "My Pizza Recipe": "Minha Receita de Pizza",
    "Native share failed": "Compartilhamento nativo falhou",
    "Failed to copy": "Falha ao copiar",
    "guest": "visitante",
    "Flour": "Farinha",
    "Failed to generate PDF file.": "Falha ao gerar arquivo PDF.",
    "Failed to export batch to PDF:": "Falha ao exportar fornada para PDF:",
    "Stripe failed to initialize.": "Stripe falhou ao inicializar.",
    "Stripe Redirect Error:": "Erro de Redirecionamento Stripe:",
    "Payment Error:": "Erro de Pagamento:",
    "Firebase not initialized": "Firebase não inicializado",
    "Error uploading image:": "Erro ao enviar imagem:",
    "The Taste of Bread (Raymond Calvel)": "O Gosto do Pão (Raymond Calvel)",
    "Wheat Flour Milling (E.S. Posner)": "Moagem de Farinha de Trigo (E.S. Posner)",
    "Understanding Baking (Joseph Amendola)": "Entendendo a Panificação (Joseph Amendola)",
    "The Elements of Pizza (Ken Forkish)": "Os Elementos da Pizza (Ken Forkish)",
    "Italian Decree on Flours (DPR 187/2001)": "Decreto Italiano sobre Farinhas (DPR 187/2001)",
    "Did you know? Autolyse allows protease enzymes to degrade gluten bonds while amylase turns starch into sugars. This creates a more extensible dough.": "Você sabia? A autólise permite que enzimas proteases degradem quebrem o glúten enquanto a amilase transforma amido em açúcares. Isso cria uma massa mais extensível."
}

COMMON_ES = {
    "Home": "Inicio",
    "Calculator": "Calculadora",
    "Learn": "Aprender",
    "Shop": "Tienda",
    "Styles": "Estilos",
    "Legal": "Legal",
    "Tools": "Herramientas",
    "Community": "Comunidad",
    "Daily table bread": "Pan de mesa diario",
    "Burger buns": "Hamburguesa",
    "Sandwich rolls": "Panecillos para sándwich",
    "Sandwich bread": "Pan de molde",
    "Bruschetta": "Bruschetta",
    "Rustic table bread": "Pan rústico de mesa",
    "Flatbread snack": "Snack de pan plano",
    "Sandwich base": "Base para sándwich",
    "Artisan bread expressing local grains": "Pan artesanal expresando granos locales",
    "Global": "Global",
    "Hot dog buns": "Panes de perrito caliente",
    "Sausage rolls": "Rollitos de salchicha",
    "Soft sandwich bread": "Pan de molde suave",
    "Thick toast": "Tostada gruesa",
    "Traditional Scandinavian flatbread": "Pan plano tradicional escandinavo",
    "Sweet or savory wraps": "Wraps dulces o salados",
    "Nutritious sourdough loaves": "Panes nutritivos de masa madre",
    "Accompaniment to curries": "Acompañamiento para curries",
    "Flatbread for dipping": "Pan plano para mojar",
    "Rustic sandwiches": "Sándwiches rústicos",
    "Rustic loaves": "Panes rústicos",
    "Soup accompaniment": "Acompañamiento de sopa",
    "Rustic Italian table bread": "Pan de mesa italiano rústico",
    "Sweet rolls": "Panecillos dulces",
    "Milk bread loaves": "Panes de leche",
    "Snack sandwiches": "Sándwiches de merienda",
    "Breakfast rolls": "Panecillos de desayuno",
    "Sweet or savory fillings": "Rellenos dulces o salados",
    "Pocket flatbread": "Pan de pita (bolsillo)",
    "Wraps and sandwiches": "Wraps y sándwiches",
    "Traditional pretzels": "Pretzels tradicionales",
    "Pretzel rolls and sticks": "Panecillos y palitos de pretzel",
    "Traditional rye loaves": "Panes de centeno tradicionales",
    "Cold cuts and cheese": "Embutidos y quesos",
    "Artisan sourdough": "Masa madre artesanal",
    "Dense wholegrain rye bread": "Pan de centeno integral denso",
    "Long keeping breads": "Panes de larga duración",
    "Wholegrain sandwich bread": "Pan de molde integral",
    "Mix to medium development": "Mezclar hasta desarrollo medio",
    "Mix to full development": "Mezclar hasta desarrollo completo",
    "Proof in Pullman Pan": "Fermentar en molde Pullman",
    "Hang upside down": "Colgar boca abajo",
    "Mix dry ingredients": "Mezclar ingredientes secos",
    "Bake hot and fast": "Hornear caliente y rápido",
    "Fold in Dry": "Incorporar secos",
    "Sweet loaf": "Pan dulce",
    "Pastry": "Pastelería",
    "Filled donuts": "Donas rellenas",
    "Sweet fried pastries": "Pasteles fritos dulces",
    "Breakfast pastry": "Bollería de desayuno",
    "Festive sweet bread for Easter": "Pan dulce festivo para Pascua",
    "Viennoiserie display": "Vitrina de Viennoiserie",
    "Fried sweet doughnuts": "Donas dulces fritas",
    "Festive treats": "Golosinas festivas",
    "Sweet breakfast pastry": "Bollería dulce de desayuno",
    "Viennoiserie item": "Artículo de Viennoiserie",
    "Snack pastry": "Pastel de merienda",
    "Festive sweet bread": "Pan dulce festivo",
    "Christmas bread": "Pan de Navidad",
    "Festive sweet loaf": "Hogaza dulce festiva",
    "Generic sweet rolls": "Panecillos dulces genéricos",
    "Base for multiple pastry formats": "Base para múltiples formatos",
    "Fried donuts": "Donas fritas",
    "Glazed or filled donuts": "Donas glaseadas o rellenas",
    "Pizza": "Pizza",
    "Gourmet personal pizzas": "Pizzas gourmet individuales",
    "Creative toppings": "Coberturas creativas",
    "Deep dish pizza": "Pizza Deep Dish",
    "Thick pan pizza": "Pizza de molde gruesa",
    "Authentic Neapolitan Margherita": "Margherita Napolitana Auténtica",
    "Marinara": "Marinara",
    "Gourmet toppings": "Coberturas gourmet",
    "Home baking without pizza oven": "Hornear en casa sin horno de pizza",
    "Crispier crust lovers": "Amantes de masa crujiente",
    "Charred thin crust": "Masa fina tostada",
    "Clam pie": "Pizza de almejas",
    "Premium slice shops": "Pizzerías de porción premium",
    "Whole pie artisan pizzerias": "Pizzerías artesanales (pizza entera)",
    "Roman thin pizza": "Pizza fina romana",
    "Crispy pizza base": "Base de pizza crujiente",
    "Roman pan pizza": "Pizza romana al taglio",
    "Cracker crust pizza": "Pizza masa cracker",
    "Party snacks": "Aperitivos de fiesta",
    "Taiwanese burger": "Hamburguesa taiwanesa",
    "Barbarian Head": "Cabeza de Bárbaro",
    "Second Proof": "Segunda Fermentación",
    "Zombie Skin": "Piel de Zombi",
    "Blessing the bread": "Bendiciendo el pan",
    "Scald": "Escaldar",
    "Pocket Mechanism": "Mecanismo de Bolsillo",
    "Firebase Firestore failed to initialize": "Error al inicializar Firebase Firestore",
    "Firebase Storage failed to initialize": "Error al inicializar Firebase Storage",
    "Explore": "Explorar",
    "History of your productions.": "Historial de tus producciones.",
    "Start a new calculation to save your first bake.": "Inicia un nuevo cálculo para guardar tu primera horneada.",
    "Go to Calculator": "Ir a Calculadora",
    "Piece Weight": "Peso de la Pieza",
    "Units": "Unidades",
    "Load": "Cargar",
    "Updated successfully.": "Actualizado con éxito.",
    "Are you sure you want to delete \"{name}\"?": "¿Estás seguro de que quieres eliminar \"{name}\"?",
    "Are you sure you want to delete oven \"{name}\"?": "¿Estás seguro de que quieres eliminar la horno \"{name}\"?",
    "Are you sure you want to delete levain \"{name}\"?": "¿Estás seguro de que quieres eliminar el levain \"{name}\"?",
    "Guided": "Guiado",
    "Hot Day": "Día Caluroso",
    "Try lower yeast.": "Prueba menos levadura.",
    "Cold Day": "Día Frío",
    "Try longer ferment.": "Prueba fermentación más larga.",
    "Great for crisp crusts.": "Genial para cortezas crujientes.",
    "Advertisement": "Publicidad",
    "Unlock DoughLab Pro": "Desbloquea DoughLab Pro",
    "Take your baking to the professional level with advanced tools and insights.": "Lleva tu panadería al nivel profesional con herramientas avanzadas.",
    "Maybe later": "Quizás más tarde",
    "Best Value": "Mejor Valor",
    "Pro Plan": "Plan Pro",
    "/ month": "/ mes",
    "Favorites": "Favoritos",
    "Filters": "Filtros",
    "Type": "Tipo",
    "Region": "Región",
    "Cookies": "Galletas",
    "Pizzas": "Pizzas",
    "Production Hub": "Centro de Producción",
    "My Lab": "Mi Laboratorio",
    "Your personal baking command center. Manage your schedule, track your cultures, and analyze your progress in one place.": "Tu centro de comando personal. Gestiona horarios, sigue cultivos y analiza progreso.",
    "Lab Status": "Estado del Lab",
    "Operational": "Operativo",
    "Total Batches": "Total de Lotes",
    "Limit Reached": "Límite Alcanzado",
    "Daily Operations": "Operaciones Diarias",
    "Essential tools for planning and logging your baking sessions.": "Herramientas esenciales para planificar y registrar.",
    "Analysis Lab": "Lab de Análisis",
    "Recent Activity": "Actividad Reciente",
    "Start your first bake": "Inicia tu primera horneada",
    "Daily Tip": "Consejo Diario",
    "Read Full Article": "Leer Artículo Completo",
    "AI Beta": "IA Beta",
    "Unlock Pro Features": "Desbloquear Funciones Pro",
    "Custom Style": "Estilo Personalizado",
    "Autolyse Science": "Ciencia de la Autólisis",
    "Smart Timeline": "Línea de Tiempo Inteligente",
    "Plan your fermentation schedule from start to finish.": "Planifica tu horario de fermentación.",
    "My Bakes": "Mis Horneadas",
    "Your digital notebook. Log every detail of your bakes.": "Tu cuaderno digital. Registra cada detalle.",
    "Levain Tracker": "Rastreador de Levain",
    "Monitor the health and feeding schedule of your starter.": "Monitorea la salud y alimentación de tu masa madre.",
    "Inventory": "Inventario",
    "Keep track of flour stocks and ingredients.": "Sigue el stock de harina e ingredientes.",
    "Consistency Logic": "Lógica de Consistencia",
    "Track variables across batches to master repeatability.": "Sigue variables para dominar la repetibilidad.",
    "A/B Comparisons": "Comparaciones A/B",
    "Compare two recipes side-by-side to find the best method.": "Compara dos recetas lado a lado.",
    "Deep Insights": "Insights Profundos",
    "Visual analytics of your baking trends and history.": "Análisis visual de tus tendencias.",
    "Learning Goals": "Metas de Aprendizaje",
    "Set targets and track your skill progression.": "Define metas y sigue tu evolución.",
    "Precision calculators and utilities for serious bakers.": "Calculadoras de precisión para panaderos serios.",
    "From fundamental chemistry to advanced techniques.": "De química fundamental a técnicas avanzadas.",
    "Categories": "Categorías",
    "Upgrade Successful!": "¡Actualización exitosa!",
    "Upgrade Cancelled": "Actualización cancelada",
    "Find answers to common questions.": "Encuentra respuestas a preguntas comunes.",
    "This field is required": "Este campo es obligatorio",
    "Please enter a valid email": "Por favor, introduce un correo válido",
    "Something went wrong. Please try again.": "Algo salió mal. Inténtalo de nuevo.",
    "Network error. Check your connection.": "Error de red. Verifica tu conexión.",
    "You need to sign in to do that.": "Necesitas iniciar sesión para hacer esto.",
    "Saved successfully!": "¡Guardado con éxito!",
    "Deleted successfully!": "¡Eliminado con éxito!",
    "Created successfully!": "¡Creado con éxito!",
    "Low Power Strategy": "Estratégia de Baja Potencia",
    "Home gas oven": "Horno de gas doméstico",
    "Home electric oven": "Horno eléctrico doméstico",
    "Convection oven": "Horno de convección",
    "Convection Mode": "Modo Convección",
    "Why preheat?": "¿Por qué precalentar?",
    "Analysis Summary": "Resumen del Análisis",
    "Current Plan:": "Plan Actual:",
    "Diagnosis of potential causes will appear here.": "El diagnóstico de causas potenciales aparecerá aquí.",
    "Define your equipment parameters.": "Define los parámetros de tu equipo.",
    "Wood-fired oven": "Horno de leña",
    "Pro Insight:": "Insight Pro:",
    "FormulaLab": "FormulaLab",
    "Admin": "Admin",
    "Welcome back": "Bienvenido de nuevo",
    "Quick Actions": "Acciones Rápidas",
    "Your Stats": "Tus Estadísticas",
    "Total Recipes": "Total de Recetas",
    "Get Started": "Empezar",
    "Coming Soon: Early 2026 Roadmap": "Próximamente: Roadmap Inicios 2026",
    "Visit": "Visitar",
    "Correction Required": "Corrección Necesaria",
    "Perfect Match": "Combinación Perfecta",
    "Check your email": "Verifica tu correo",
    "Ingredients Planner": "Planificador de Ingredientes",
    "Qty/unit": "Cant/unidad",
    "Optional notes about your oven...": "Notas opcionales sobre tu horno...",
    "Forever free": "Siempre gratis",
    "Generate a social card to share": "Generar tarjeta social para compartir",
    "Tools for this Formula": "Herramientas para esta Fórmula",
    "DOUGHLAB PRO": "DOUGHLAB PRO",
    "Time": "Tiempo",
    "Preferment": "Prefermento",
    "Created by": "Creado por",
    "Description": "Descripción",
    "Tags": "Etiquetas",
    "Difficulty": "Dificultad",
    "Title": "Título",
    "Phase": "Fase",
    "Mix": "Mezcla",
    "Bulk": "Fermentación en Bloque",
    "Ball": "Bolear",
    "Bake": "Hornear",
    "Duration": "Duración",
    "Action": "Acción",
    "Explain the scientific": "Explicar lo científico",
    "What to do...": "Qué hacer...",
    "Custom": "Personalizado",
    "Balanced": "Balanceado",
    "Wheat": "Trigo",
    "Generic": "Genérico",
    "Standard": "Estándar",
    "Unlock calculator": "Desbloquear calculadora",
    "Regional Variants": "Variantes Regionales",
    "Refine your style search": "Refina tu búsqueda de estilo",
    "Difficulty Level": "Nivel de Dificad",
    "Size": "Tamaño",
    "France": "Francia",
    "Italy": "Italia",
    "United States": "Estados Unidos",
    "Northern Italy": "Norte de Italia",
    "Traditional": "Tradicional",
    "DoughLab Pro": "DoughLab Pro",
    "Pro": "Pro",
    "Settings": "Ajustes",
    "Calculator & Recipes": "Calculadora & Recetas",
    "My Lab & Consistencies": "Mi Lab & Consistencias",
    "Styles Library & Science": "Biblioteca de Estilos & Ciencia",
    "Community & Sharing": "Comunidad & Compartir",
    "Tools & Utilities": "Herramientas & Utilidades",
    "Settings & account": "Ajustes & cuenta",
    "How do I save a recipe?": "¿Cómo guardo una receta?",
    "What is the difference between": "Cuál es la diferencia entre",
    "Can I use my own Sourdough Starter?": "¿Puedo usar mi propia Masa Madre?",
    "How do I unlock PRO features?": "¿Cómo desbloqueo funciones PRO?",
    "Go to the": "Ve a la",
    "Advanced Baker": "Panadero Avanzado",
    "Professional Pizzaiolo": "Pizzaiolo Profesional",
    "Upgrade Now": "Mejorar Ahora",
    "Legal Overview": "Resumen Legal",
    "Terms of Use": "Términos de Uso",
    "Privacy Policy": "Política de Privacidad",
    "Cookie Policy": "Política de Cookies",
    "Affiliate Disclosure": "Divulgación de Afiliados",
    "EULA": "EULA",
    "Intellectual Property": "Propiedad Intelectual",
    "Contact": "Contacto",
    "Invalid JSON file": "Archivo JSON inválido",
    "Easy": "Fácil",
    "Direct": "Directa",
    "Ideal": "Ideal",
    "Loaded from style:": "Cargado del estilo:",
    "Cannot find closest size in an empty array.": "No se puede encontrar tamaño más cercano en array vacío.",
    "Could not find root element to mount to": "No se pudo encontrar elemento raíz para montar",
    "Not specified": "No especificado",
    "Empty response from AI model": "Respuesta vacía del modelo de IA",
    "Sorry, I couldn": "Lo siento, no pude",
    "Empty response": "Respuesta vacía",
    "Failed to generate style. Please try a different description.": "Error al generar estilo. Intenta una descripción diferente.",
    "Empty diagnostic response": "Respuesta de diagnóstico vacía",
    "Failed to diagnose the issue. Please try again.": "Error al diagnosticar el problema. Inténtalo de nuevo.",
    "My Levain": "Mi Levain",
    "User": "Usuario",
    "Failed to generate image": "Error al generar imagen",
    "ErrorBoundary caught an error:": "ErrorBoundary capturó un error:",
    "Please upload an image file (JPG, PNG, WEBP).": "Sube un archivo de imagen (JPG, PNG, WEBP).",
    "Image must be smaller than 5MB.": "La imagen debe ser menor de 5MB.",
    "Failed to upload image. Please try again.": "Error al subir imagen. Inténtalo de nuevo.",
    "Download PDF": "Descargar PDF",
    "Error generating PDF:": "Error al generar PDF:",
    "Upgrade to DoughLab Pro to unlock this advanced tool.": "Mejora a DoughLab Pro para desbloquear esta herramienta avanzada.",
    "Error sharing:": "Error al compartir:",
    "Failed to copy:": "Error al copiar:",
    "Failed to save preferred flour": "Error al guardar harina preferida",
    "Unknown": "Desconocido",
    "Error fetching user profile:": "Error al obtener perfil de usuario:",
    "Auto-upgrading admin user in Firestore...": "Auto-atualizando admin en Firestore...",
    "Failed to auto-upgrade admin:": "Error al auto-actualizar admin:",
    "Error loading guest favorites:": "Error al cargar favoritos de invitado:",
    "Failed to initialize Firebase App:": "Error al inicializar Firebase App:",
    "Firebase configuration missing. App running in Mock/Offline mode.": "Configuración Firebase ausente. App en modo Mock/Offline.",
    "High-Heat / Pro Deck Oven": "Horno de Piso / Alta Temp",
    "High-Performance Home Oven": "Horno Doméstico Alto Rendimiento",
    "Standard Home Oven": "Horno Doméstico Estándar",
    "Low-Power Home Oven": "Horno Doméstico Baja Potencia",
    "Universal": "Universal",
    "Failed to record ad view": "Error al registrar vista de anuncio",
    "Redirecting to upgrade...": "Redirigiendo a mejora...",
    "My Pizza Recipe": "Mi Receta de Pizza",
    "Native share failed": "Compartir nativo falló",
    "Failed to copy": "Error al copiar",
    "guest": "invitado",
    "Flour": "Harina",
    "Failed to generate PDF file.": "Error al generar archivo PDF.",
    "Failed to export batch to PDF:": "Error al exportar lote a PDF:",
    "Stripe failed to initialize.": "Stripe falló al inicializar.",
    "Stripe Redirect Error:": "Error de Redirección Stripe:",
    "Payment Error:": "Error de Pago:",
    "Firebase not initialized": "Firebase no inicializado",
    "Error uploading image:": "Error al subir imagen:",
    "The Taste of Bread (Raymond Calvel)": "El Sabor del Pan (Raymond Calvel)",
    "Wheat Flour Milling (E.S. Posner)": "Molienda de Harina de Trigo (E.S. Posner)",
    "Understanding Baking (Joseph Amendola)": "Entendiendo la Panadería (Joseph Amendola)",
    "The Elements of Pizza (Ken Forkish)": "Los Elementos de la Pizza (Ken Forkish)",
    "Italian Decree on Flours (DPR 187/2001)": "Decreto Italiano sobre Harinas (DPR 187/2001)",
    "Did you know? Autolyse allows protease enzymes to degrade gluten bonds while amylase turns starch into sugars. This creates a more extensible dough.": "¿Sabías qué? La autólisis permite que las enzimas proteasas degraden los enlaces de gluten mientras la amilasa convierte el almidón en azúcares. Esto crea una masa más extensible."
}

def translate_value(val, common_dict):
    if val in common_dict:
        return common_dict[val]
    # Simple case-insensitive
    for k, v in common_dict.items():
        if k.lower() == val.lower():
            return v
    # Clean string check
    cleaned = val.strip().rstrip('.').rstrip(':')
    for k, v in common_dict.items():
        if k.lower() == cleaned.lower():
            return v
    return val

def process_file(lang, namespace, common_dict):
    path = os.path.join(os.getcwd(), 'public', 'locales', lang, f'{namespace}.json')
    if not os.path.exists(path):
        print(f"File not found: {path}, skipping.")
        return

    data = load_json(path)
    en_path = os.path.join(os.getcwd(), 'public', 'locales', 'en', f'{namespace}.json')
    en_data = load_json(en_path)

    def walk_and_update(en_node, lang_node):
        modified = False
        for k, v in en_node.items():
            if k not in lang_node:
                if isinstance(v, dict):
                    lang_node[k] = {}
                    walk_and_update(v, lang_node[k])
                else:
                    lang_node[k] = translate_value(v, common_dict)
                modified = True
            else:
                if isinstance(v, dict):
                    if isinstance(lang_node[k], dict):
                        if walk_and_update(v, lang_node[k]):
                            modified = True
                else:
                    if lang_node[k] == v:
                        new_val = translate_value(v, common_dict)
                        if new_val != v:
                            lang_node[k] = new_val
                            modified = True
        return modified

    if walk_and_update(en_data, data):
        print(f"Updating {lang} {namespace}.json...")
        save_json(path, data)
    else:
        print(f"No changes for {lang} {namespace}.json.")

if __name__ == "__main__":
    for ns in ['common']:
         print(f"Processing PT {ns}...")
         process_file('pt', ns, COMMON_PT)
         print(f"Processing ES {ns}...")
         process_file('es', ns, COMMON_ES)
